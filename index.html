<!DOCTYPE html>
<html>
<head>
    <title>A380 Free Explorer (Leaflet)</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; font-family: sans-serif; }
        #map { height: 100%; width: 100%; position: absolute; }
        
        /* ‚úàÔ∏è Your Local A380 Image */
        #plane-container {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000; pointer-events: none;
        }
        #plane-img {
            width: 120px;
            filter: drop-shadow(0 0 10px rgba(0, 255, 0, 0.7));
            transition: transform 0.1s;
        }

        #ui-panel { 
            position: absolute; top: 10px; left: 10px; z-index: 2000; 
            background: rgba(0,0,0,0.8); color: #00ff00; padding: 15px; border-radius: 5px; border: 1px solid #00ff00;
        }
        #mini-map { 
            position: absolute; bottom: 20px; right: 20px; width: 150px; height: 150px; 
            border: 2px solid #00ff00; border-radius: 50%; z-index: 2000; overflow: hidden;
        }
        .bank-left { transform: rotate(-15deg); }
        .bank-right { transform: rotate(15deg); }
    </style>
</head>
<body>

    <div id="ui-panel">
        <h3 style="margin:0">FREE PILOT HUD</h3>
        <p>COORDS: <span id="coords">Calculating...</span></p>
        <p style="font-size: 10px;">WASD to Move | SPACE for Turbo</p>
    </div>

    <div id="mini-map"></div>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // üìç London Center
        let pos = [51.505, -0.09]; 
        let heading = 0;
        const keys = {};

        // üó∫Ô∏è Main Map Setup (OpenStreetMap - FREE)
        const map = L.map('map', { zoomControl: false, attributionControl: false }).setView(pos, 16);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // üó∫Ô∏è Mini-Map Setup
        const miniMap = L.map('mini-map', { zoomControl: false, attributionControl: false, dragging: false }).setView(pos, 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(miniMap);

        window.addEventListener('keydown', e => keys[e.code] = true);
        window.addEventListener('keyup', e => keys[e.code] = false);

        function gameLoop() {
            const planeImg = document.getElementById('plane-img');
            let multiplier = keys['Space'] ? 3 : 1;
            let speed = 0.0001 * multiplier;

            if (keys['KeyA']) { heading -= 2; planeImg.className = 'bank-left'; }
            else if (keys['KeyD']) { heading += 2; planeImg.className = 'bank-right'; }
            else { planeImg.className = ''; }

            if (keys['KeyW']) {
                pos[0] += Math.cos(heading * Math.PI / 180) * speed;
                pos[1] += Math.sin(heading * Math.PI / 180) * speed;
            }
            if (keys['KeyS']) {
                pos[0] -= Math.cos(heading * Math.PI / 180) * (speed / 2);
                pos[1] -= Math.sin(heading * Math.PI / 180) * (speed / 2);
            }

            // Sync Main Map
            map.setView(pos, 16, { animate: false });
            // Sync Mini-Map (Follows Plane)
            miniMap.setView(pos, 13, { animate: false });

            document.getElementById('coords').innerText = pos[0].toFixed(4) + ", " + pos[1].toFixed(4);
            requestAnimationFrame(gameLoop);
        }

        requestAnimationFrame(gameLoop);
    </script>

    <div id="plane-container">
        <img id="plane-img" src="Plane_icon_nose_up.png">
    </div>

</body>
</html>
